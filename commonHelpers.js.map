{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/bi_x-octagon.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(page, searchRequest) {\n  const params = {\n    key: '44327397-ede54b0a70b202831c7c411c5',\n    q: searchRequest,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n\n  const res = await axios.get('https://pixabay.com/api/', { params });\n\n  return res.data;\n}\n","export const imgListElem = document.querySelector('.img-list');\n\nfunction imageTemplate(image) {\n  return `<li class=\"list-item\">\n          <div class=\"img-box\">\n            <a\n              class=\"gallery-link\"\n              href=\"${image.largeImageURL}\"\n            >\n              <img\n                src=\"${image.previewURL}\"\n                alt=\"${image.tags}\"\n                title=\"${image.tags}\"\n              />\n            </a>\n          </div>\n          <ul class=\"description-list\">\n            <li class=\"description-item\">\n              <p>Likes</p>\n              <p>${image.likes}</p>\n            </li>\n            <li class=\"description-item\">\n              <p>Views</p>\n              <p>${image.views}</p>\n            </li>\n            <li class=\"description-item\">\n              <p>Comments</p>\n              <p>${image.comments}</p>\n            </li>\n            <li class=\"description-item\">\n              <p>Downloads</p>\n              <p>${image.downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n}\n\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEaSURBVHgBrZZhDoIwDIUL0fjXo3gUb7R5Er0BHsXD7A+bASlhYeC6V4WXGCHr3reNtkAkqG2D9T70mh/HSj4HybyqyPQ9PeuaXlRQ19GFY4c5dDodLSHNK3/fSam29Q+0k7/N1ZAt5hCyh7kIKZl77y/IMBezgEwXTW4ienBxcc65DCQ0PDYCQghGMDASJJpzTG4ue0KABEHmKeBAQEPx3LiIhmKy/M+aitDyGJoPAWsI32vNWTXpVQnXRal2kPQmO7pPx6XpPRCQmsdjSZ8JhIA0FbOllMKsRZqCQoMpXCy0GJRrFc7hVpGLSVqFWaxk52ZnVgPbIaL5HhBovgVSMv+qg7kt9JznZ+VL//pL+5hWFXei+mwRj+UDSHQ9vnHBEYAAAAAASUVORK5CYII=\"","import { getImages } from './js/pixabay-api';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { imgListElem } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport icon from './img/bi_x-octagon.png';\nimport { imagesTemplate } from './js/render-functions';\nimport simpleLightbox from 'simplelightbox';\n\nconst gallery = new simpleLightbox('.img-list a', {\n  captionDelay: 500,\n  captionPosition: 'bottom',\n});\n\nconst iziToastOptionsForSearch = {\n  iconUrl: icon,\n  backgroundColor: '#ef4040',\n  position: 'topRight',\n  message:\n    'Sorry, there are no images matching your search query. Please, try again!',\n};\n\nconst iziToastOptionsForMorePhotos = {\n  iconUrl: icon,\n  backgroundColor: '#8fe5d9b3',\n  position: 'topRight',\n  message: `We're sorry, but you've reached the end of search results.`,\n};\n\nconst formElem = document.querySelector('.search-form');\nconst loadingElem = document.querySelector('.loader');\nconst loadingMoreElem = document.querySelector('.loader-more-photos');\n\nconst nextPageBtnElem = document.querySelector('.js-next-page-btn');\n\nlet searchWord;\nlet currentPage = 1;\nlet totalHits;\n\nformElem.addEventListener('submit', loadPhotos);\nnextPageBtnElem.addEventListener('click', morePhotos);\n\nasync function morePhotos() {\n  loadingMoreElem.classList.remove('visually-hidden');\n\n  try {\n    const responce = await getImages(currentPage + 1, searchWord);\n    imgListElem.insertAdjacentHTML('beforeend', imagesTemplate(responce.hits));\n    gallery.refresh();\n    let elem = document.querySelector('.list-item');\n    let rect = elem.getBoundingClientRect();\n\n    window.scrollBy({\n      top: -rect.y * 5,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    throw new Error(err);\n  }\n\n  loadingMoreElem.classList.add('visually-hidden');\n\n  currentPage += 1;\n\n  if (currentPage === Math.ceil(totalHits / 15)) {\n    iziToast.show(iziToastOptionsForMorePhotos);\n    nextPageBtnElem.classList.add('visually-hidden');\n    loadingMoreElem.classList.add('visually-hidden');\n    return;\n  }\n}\n\nasync function loadPhotos(e) {\n  e.preventDefault();\n  currentPage = 1;\n  if (currentPage === Math.ceil(totalHits / 15)) {\n    iziToast.show(iziToastOptionsForMorePhotos);\n    nextPageBtnElem.classList.add('visually-hidden');\n    loadingMoreElem.classList.add('visually-hidden');\n    return;\n  }\n  imgListElem.innerHTML = '';\n\n  loadingElem.classList.remove('visually-hidden');\n\n  const searchText = formElem.elements.searchText.value.trim();\n  if (searchText === '') {\n    loadingElem.classList.add('visually-hidden');\n    return;\n  }\n  searchWord = searchText;\n  try {\n    const responce = await getImages(currentPage, searchText);\n\n    if (responce.hits.length === 0) {\n      iziToast.show(iziToastOptionsForSearch);\n      loadingElem.classList.add('visually-hidden');\n      formElem.reset();\n      return;\n    }\n    totalHits = responce.totalHits;\n\n    loadingElem.classList.add('visually-hidden');\n\n    imgListElem.innerHTML = imagesTemplate(responce.hits);\n\n    gallery.refresh();\n    nextPageBtnElem.classList.remove('visually-hidden');\n  } catch (err) {\n    throw new Error(err);\n  }\n\n  formElem.reset();\n}\n"],"names":["getImages","page","searchRequest","params","axios","imgListElem","imageTemplate","image","imagesTemplate","arr","icon","gallery","simpleLightbox","iziToastOptionsForSearch","iziToastOptionsForMorePhotos","formElem","loadingElem","loadingMoreElem","nextPageBtnElem","searchWord","currentPage","totalHits","loadPhotos","morePhotos","responce","rect","err","iziToast","searchText"],"mappings":"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"}